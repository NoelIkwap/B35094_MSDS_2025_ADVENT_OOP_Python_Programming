{% extends "base.html" %}

{% block content %}
<div class="container mt-4">

    <!-- Back / Home button -->
    <button id="returnToMainBtn" class="btn btn-secondary mb-3">
        <i class="fas fa-home"></i> Home
    </button>

    <!-- Verification Section -->
    <div class="card p-4 mb-4">
        <h2>Verification Actions - Individual Number: <code>{{ refugee.individual_number }}</code></h2>

        <table class="table table-bordered mt-3">
            <tr>
                <th>Process Status</th>
                <td>{{ refugee.process_status }}</td>
            </tr>
            <tr>
                <th>Refugee Status</th>
                <td>{{ refugee.legal_status }}</td>
            </tr>
            <tr>
                <th>NSSF Number</th>
                <td id="nssf-number">{{ refugee.nssf_number or "Not Issued" }}</td>
            </tr>
        </table>

        <div class="mt-3">
            {% if is_nssf_eligible %}
            <button id="issue-nssf-btn" class="btn btn-success btn-lg">Proceed and Issue NSSF Number</button>
            {% endif %}

            <button id="returnToMainBtnInfo" class="btn btn-secondary btn-lg">Return to Main Page</button>
        </div>
    </div>

    <!-- Show full personal information (if verified) -->
    <div id="personalInfoContainer" class="card p-4 mt-4" style="display: none;">
        <h4>Personal Information</h4>
        <table class="table table-bordered mt-2">
            <tr><th>Full Name</th><td id="info-full_name">{{ refugee.full_name }}</td></tr>
            <tr><th>Date of Birth</th><td id="info-date_of_birth">{{ refugee.date_of_birth }}</td></tr>
            <tr><th>Age</th><td id="info-age">{{ refugee.age }}</td></tr>
            <tr><th>Gender</th><td id="info-gender">{{ refugee.gender }}</td></tr>
            <tr><th>Nationality</th><td id="info-country_of_origin">{{ refugee.country_of_origin }}</td></tr>
            <tr><th>Refugee Status</th><td id="info-legal_status">{{ refugee.legal_status }}</td></tr>
            <tr><th>Date of Registration</th><td id="info-registration_date">{{ refugee.registration_date }}</td></tr>
            <tr><th>Camp / Location</th><td id="info-location_address">{{ refugee.location_address }}</td></tr>
            <tr><th>Family Group Number</th><td id="info-family_group_number">{{ refugee.family_group_number }}</td></tr>
            <tr><th>Family Size</th><td id="info-family_size">{{ refugee.family_size }}</td></tr>
            <tr><th>Individual Number</th><td id="info-individual_number">{{ refugee.individual_number }}</td></tr>
            <tr><th>NSSF Number</th><td id="info-nssf_number">{{ refugee.nssf_number or "Not Issued" }}</td></tr>
        </table>

        <div class="mt-3">
            <button id="issueNssfBtn" class="btn btn-success btn-lg">Proceed and Issue NSSF Number</button>
            <button id="returnToMainBtn" class="btn btn-secondary btn-lg">Return to Main Page</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
{% endblock %}
